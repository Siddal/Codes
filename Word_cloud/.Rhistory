knitr::opts_chunk$set(echo = TRUE)
defaultdir <- getwd()
dir.create("graph")
dir.create("table")
# setwd(paste(defaultdir,"/graph",sep=""))
#Adding the required packages for this file. Don't change the current order, and adding new packages to the first.
packages <- c(
"ggplot2",
"tidyverse",
"stringr",
"dplyr",
"factoextra",
"vegan",
"CCA")
if (length(setdiff(packages, rownames(installed.packages()))) > 0) {
install.packages(setdiff(packages, rownames(installed.packages())))
lapply(packages, library, character.only = TRUE)
} else {
lapply(packages, library, character.only = TRUE)
}
otu <- read.csv(
paste(defaultdir,"/data/","otu.csv",sep=""),
header = T, sep = ",")
metadata <- read.csv(
paste(defaultdir,"/data/","metadata.csv",sep=""),
header = T, sep = ",")
t_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(t_otu) <- otu$OTU_Id
t_otu$SampleId <- rownames(t_otu)
metadata_otu <- inner_join(metadata, t_otu, by = "SampleId")
remove(t_otu)
rownames(metadata_otu) <- metadata_otu$SampleId
digestion <- read.csv(
paste(defaultdir,"/data/","DigestionNutrient.csv",sep=""),
header = T, sep = ",")
leaching <- read.csv(
paste(defaultdir,"/data/","LeachingNutrient.csv",sep=""),
header = T, sep = ",")
res.pca <- prcomp(metadata_otu[,-c(1, 2)], scale = TRUE)
fviz_eig(res.pca)
fviz_pca_ind(res.pca,
repel = TRUE     # Avoid text overlapping
)
dca_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(dca_otu) <- otu$OTU_Id
dca_otu <- decorana(dca_otu, ira = 0)
# summary(dca_otu)
plot(dca_otu, display = 'sites', main = 'Samples')
plot(dca_otu, main = 'Otus')
digestion_otu <- inner_join(metadata_otu, digestion, by = "SampleId")
# grep("Al_396.152", colnames(digestion_otu)) 8028
rownames(digestion_otu) <- digestion_otu$SampleId
# correl_digestion_otu <- matcor(X, Y )
# img.matcor(correl_digestion_otu, type = 2)
#split the dataset by
cca(digestion_otu[, c(3:8027)], digestion_otu[, c(8028:ncol(digestion_otu))]) %>%
plot(., scaling = 1)
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
# grep("Al_396.152", colnames(leaching_otu))
# grep("Cu_324.754", colnames(leaching_otu)) 8028
cca(leaching_otu[, c(3:8027)], leaching_otu[, c(8028:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
View(digestion_otu)
knitr::opts_chunk$set(echo = TRUE)
defaultdir <- getwd()
dir.create("graph")
dir.create("table")
# setwd(paste(defaultdir,"/graph",sep=""))
#Adding the required packages for this file. Don't change the current order, and adding new packages to the first.
packages <- c(
"ggplot2",
"tidyverse",
"stringr",
"dplyr",
"factoextra",
"vegan",
"CCA")
if (length(setdiff(packages, rownames(installed.packages()))) > 0) {
install.packages(setdiff(packages, rownames(installed.packages())))
lapply(packages, library, character.only = TRUE)
} else {
lapply(packages, library, character.only = TRUE)
}
otu <- read.csv(
paste(defaultdir,"/data/","otu.csv",sep=""),
header = T, sep = ",")
metadata <- read.csv(
paste(defaultdir,"/data/","metadata.csv",sep=""),
header = T, sep = ",")
t_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(t_otu) <- otu$OTU_Id
t_otu$SampleId <- rownames(t_otu)
metadata_otu <- inner_join(metadata, t_otu, by = "SampleId")
remove(t_otu)
rownames(metadata_otu) <- metadata_otu$SampleId
digestion <- read.csv(
paste(defaultdir,"/data/","DigestionNutrient.csv",sep=""),
header = T, sep = ",")
otu <- read.csv(
paste(defaultdir,"/data/","otu.csv",sep=""),
header = T, sep = ",")
metadata <- read.csv(
paste(defaultdir,"/data/","metadata.csv",sep=""),
header = T, sep = ",")
t_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(t_otu) <- otu$OTU_Id
t_otu$SampleId <- rownames(t_otu)
metadata_otu <- inner_join(metadata, t_otu, by = "SampleId")
remove(t_otu)
rownames(metadata_otu) <- metadata_otu$SampleId
digestion <- read.csv(
paste(defaultdir,"/data/","soil_nutrient.csv",sep=""),
header = T, sep = ",")
res.pca <- prcomp(metadata_otu[,-c(1, 2)], scale = TRUE)
fviz_eig(res.pca)
fviz_pca_ind(res.pca,
repel = TRUE     # Avoid text overlapping
)
dca_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(dca_otu) <- otu$OTU_Id
dca_otu <- decorana(dca_otu, ira = 0)
# summary(dca_otu)
plot(dca_otu, display = 'sites', main = 'Samples')
plot(dca_otu, main = 'Otus')
digestion_otu <- inner_join(metadata_otu, digestion, by = "SampleId")
# grep("Al_396.152", colnames(digestion_otu)) 8028
rownames(digestion_otu) <- digestion_otu$SampleId
# correl_digestion_otu <- matcor(X, Y )
# img.matcor(correl_digestion_otu, type = 2)
#split the dataset by otus and treatments
cca(digestion_otu[, c(3:8027)], digestion_otu[, c(8028:ncol(digestion_otu))]) %>%
plot(., scaling = 1)
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
View(digestion_otu)
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
cca(leaching_otu[, c(3:43)], leaching_otu[, c(44:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
cca(leaching_otu[, c(3:43)], leaching_otu[, c(44:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
cca(leaching_otu[, c(3:43)], leaching_otu[, c(44:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
defaultdir <- getwd()
dir.create("graph")
dir.create("table")
# setwd(paste(defaultdir,"/graph",sep=""))
#Adding the required packages for this file. Don't change the current order, and adding new packages to the first.
packages <- c(
"ggplot2",
"tidyverse",
"stringr",
"dplyr",
"factoextra",
"vegan",
"CCA")
if (length(setdiff(packages, rownames(installed.packages()))) > 0) {
install.packages(setdiff(packages, rownames(installed.packages())))
lapply(packages, library, character.only = TRUE)
} else {
lapply(packages, library, character.only = TRUE)
}
otu <- read.csv(
paste(defaultdir,"/data/","otu.csv",sep=""),
header = T, sep = ",")
metadata <- read.csv(
paste(defaultdir,"/data/","metadata.csv",sep=""),
header = T, sep = ",")
t_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(t_otu) <- otu$OTU_Id
t_otu$SampleId <- rownames(t_otu)
metadata_otu <- inner_join(metadata, t_otu, by = "SampleId")
remove(t_otu)
rownames(metadata_otu) <- metadata_otu$SampleId
digestion <- read.csv(
paste(defaultdir,"/data/","soil_nutrient.csv",sep=""),
header = T, sep = ",")
res.pca <- prcomp(metadata_otu[,-c(1, 2)], scale = TRUE)
fviz_eig(res.pca)
fviz_pca_ind(res.pca,
repel = TRUE     # Avoid text overlapping
)
dca_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(dca_otu) <- otu$OTU_Id
dca_otu <- decorana(dca_otu, ira = 0)
# summary(dca_otu)
plot(dca_otu, display = 'sites', main = 'Samples')
plot(dca_otu, main = 'Otus')
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
otu <- read.csv(
paste(defaultdir,"/data/","otu.csv",sep=""),
header = T, sep = ",")
metadata <- read.csv(
paste(defaultdir,"/data/","metadata.csv",sep=""),
header = T, sep = ",")
t_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(t_otu) <- otu$OTU_Id
t_otu$SampleId <- rownames(t_otu)
metadata_otu <- inner_join(metadata, t_otu, by = "SampleId")
remove(t_otu)
rownames(metadata_otu) <- metadata_otu$SampleId
leaching <- read.csv(
paste(defaultdir,"/data/","soil_nutrient.csv",sep=""),
header = T, sep = ",")
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
cca(leaching_otu[, c(3:43)], leaching_otu[, c(44:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
leaching_otu <- inner_join(metadata_otu, leaching, by = "SampleId")
leaching_otu <- leaching_otu[, -c(8046:ncol(leaching_otu))]
rownames(leaching_otu) <- leaching_otu$SampleId
cca(leaching_otu[, c(3:43)], leaching_otu[, c(44:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
cca(leaching_otu[, c(1)], leaching_otu[, c(44:ncol(leaching_otu))]) %>%
plot(., scaling = 1)
defaultdir <- getwd()
dir.create("graph")
dir.create("table")
# setwd(paste(defaultdir,"/graph",sep=""))
#Adding the required packages for this file. Don't change the current order, and adding new packages to the first.
packages <- c(
"ggplot2",
"tidyverse",
"stringr",
"dplyr",
"factoextra",
"vegan",
"CCA")
if (length(setdiff(packages, rownames(installed.packages()))) > 0) {
install.packages(setdiff(packages, rownames(installed.packages())))
lapply(packages, library, character.only = TRUE)
} else {
lapply(packages, library, character.only = TRUE)
}
otu <- read.csv(
paste(defaultdir,"/data/","otu.csv",sep=""),
header = T, sep = ",")
metadata <- read.csv(
paste(defaultdir,"/data/","metadata.csv",sep=""),
header = T, sep = ",")
t_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(t_otu) <- otu$OTU_Id
t_otu$SampleId <- rownames(t_otu)
metadata_otu <- inner_join(metadata, t_otu, by = "SampleId")
remove(t_otu)
rownames(metadata_otu) <- metadata_otu$SampleId
soil_nutrient <- read.csv(
paste(defaultdir,"/data/","soil_nutrient.csv",sep=""),
header = T, sep = ",")
res.pca <- prcomp(metadata_otu[,-c(1, 2)], scale = TRUE)
fviz_eig(res.pca)
fviz_pca_ind(res.pca,
repel = TRUE     # Avoid text overlapping
)
dca_otu <- as.data.frame(t(otu[,c(2:41)]))
colnames(dca_otu) <- otu$OTU_Id
dca_otu <- decorana(dca_otu, ira = 0)
# summary(dca_otu)
plot(dca_otu, display = 'sites', main = 'Samples')
plot(dca_otu, main = 'Otus')
soil_nutrient_otu <- inner_join(metadata_otu, soil_nutrient, by = "SampleId")
soil_nutrient_otu <- soil_nutrient_otu[, -c(8046:ncol(soil_nutrient_otu))]
rownames(soil_nutrient_otu) <- soil_nutrient_otu$SampleId
cca(soil_nutrient_otu[, c(3:43)], soil_nutrient_otu[, c(44:ncol(soil_nutrient_otu))]) %>%
plot(., scaling = 1)
length(c("sfa", "fsadfaf", "asdfas"))
stopwords("english")
